<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8">
  <title>English - Lt quiz</title>
  <!-- Firebase Compat SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore-compat.js"></script>
  <style>
     /* Overall container styling */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #fcf0e8;
      padding: 20px;
      margin: 0;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      margin-top: 40px;
      background: #fcf0e8;
      padding: 30px;
      border-radius: 8px;

    }
    h1 {
      text-align: center;
      color: #333;
      margin-bottom: 100px;
      margin-top: 30px;
      font-size: 27px;
    }
    .question-block {
      margin-bottom: 30px;
      padding: 15px;
      background: #fcf4ef;
      border: 1px solid #ddd;
      border-radius: 13px;
    }
    .question {
      margin-bottom: 15px;
      font-size: 20px;
      color: #444;
    }
    /* Modal Popup styling */
    .modal {
      display: none; /* Hidden by default */
      position: fixed;
      z-index: 100;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.5);
    }
    .modal-content {
      background: #fcf0e8;
      margin: 10% auto;
      padding: 30px;
      border-radius: 8px;
      max-width: 200px;
      text-align: center;
      position: relative;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .modal-content img {
      max-width: 100%;
      height: auto;
      border-radius: 5px;
    }
    .modal-content h1 {
      margin: 20px 0 10px;
      font-size: 24px;
      color: black;
    }
    .modal-content p {
      font-size: 18px;
      color: #333;
      margin-bottom: 20px;
    }
    .close-modal {
      padding: 10px 20px;
      background: #784628;
      color: #fff;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
    }
    .close-modal:hover {
      background: #925630;
    }
    button.submit-btn {
      display: block;
      margin: 20px auto;
      padding: 12px 30px;
      background-color: #784628;
      color: #fff;
      border: none;
      border-radius: 50px;
      font-size: 18px;
      cursor: pointer;
    }
    button.submit-btn:hover {
      background: #925630;
    }

    /* Custom Checkbox CSS from the provided snippet */
    @supports (-webkit-appearance: none) or (-moz-appearance: none) {
      .checkbox-wrapper-13 input[type=checkbox] {
        --active: #275EFE;
        --active-inner: #fff;
        --focus: 2px rgba(39, 94, 254, .3);
        --border: #BBC1E1;
        --border-hover: #275EFE;
        --background: #fff;
        --disabled: #F6F8FF;
        --disabled-inner: #E1E6F9;
        -webkit-appearance: none;
        -moz-appearance: none;
        height: 21px;
        outline: none;
        display: inline-block;
        vertical-align: top;
        position: relative;
        margin: 0;
        cursor: pointer;
        border: 1px solid var(--bc, var(--border));
        background: var(--b, var(--background));
        transition: background 0.3s, border-color 0.3s, box-shadow 0.2s;
      }
      .checkbox-wrapper-13 input[type=checkbox]:after {
        content: "";
        display: block;
        left: 0;
        top: 0;
        position: absolute;
        transition: transform var(--d-t, 0.3s) var(--d-t-e, ease), opacity var(--d-o, 0.2s);
      }
      .checkbox-wrapper-13 input[type=checkbox]:checked {
        --b: var(--active);
        --bc: var(--active);
        --d-o: .3s;
        --d-t: .6s;
        --d-t-e: cubic-bezier(.2, .85, .32, 1.2);
      }
      .checkbox-wrapper-13 input[type=checkbox]:disabled {
        --b: var(--disabled);
        cursor: not-allowed;
        opacity: 0.9;
      }
      .checkbox-wrapper-13 input[type=checkbox]:disabled:checked {
        --b: var(--disabled-inner);
        --bc: var(--border);
      }
      .checkbox-wrapper-13 input[type=checkbox]:disabled + label {
        cursor: not-allowed;
      }
      .checkbox-wrapper-13 input[type=checkbox]:hover:not(:checked):not(:disabled) {
        --bc: var(--border-hover);
      }
      .checkbox-wrapper-13 input[type=checkbox]:focus {
        box-shadow: 0 0 0 var(--focus);
      }
      .checkbox-wrapper-13 input[type=checkbox]:not(.switch) {
        width: 21px;
      }
      .checkbox-wrapper-13 input[type=checkbox]:not(.switch):after {
        opacity: var(--o, 0);
      }
      .checkbox-wrapper-13 input[type=checkbox]:not(.switch):checked {
        --o: 1;
      }
      .checkbox-wrapper-13 input[type=checkbox] + label {
        display: inline-block;
        vertical-align: middle;
        cursor: pointer;
        margin-left: 4px;
      }
      .checkbox-wrapper-13 input[type=checkbox]:not(.switch) {
        border-radius: 7px;
      }
      .checkbox-wrapper-13 input[type=checkbox]:not(.switch):after {
        width: 5px;
        height: 9px;
        border: 2px solid var(--active-inner);
        border-top: 0;
        border-left: 0;
        left: 7px;
        top: 4px;
        transform: rotate(var(--r, 20deg));
      }
      .checkbox-wrapper-13 input[type=checkbox]:not(.switch):checked {
        --r: 43deg;
      }
    }
    .checkbox-wrapper-13 * {
      box-sizing: inherit;
    }
    .checkbox-wrapper-13 *:before,
    .checkbox-wrapper-13 *:after {
      box-sizing: inherit;
    }
    /* Added spacing between checkboxes */
    .checkbox-wrapper-13 {
      margin-bottom: 8px;
    }
    
        .back {
          position: fixed;
    top: 150px;
    border: none;
    left: 30px;
    background: none;
    color: rgb(0, 0, 0);
    padding: 10px 15px;
    border-radius: 50px;
    cursor: pointer;
    text-decoration: none;
    font-size: 20px;
    }

    .back:hover, .download-btn:hover {
      color: #f39c12;
    }
    
    .download-btn {
    position: fixed;
    top: 150px;
    right: 30px;
    background: none;
    color: rgb(0, 0, 0);
    padding: 10px 15px;
    border-radius: 20px;
    text-decoration: none;
    font-size: 20px;
}


    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Arial', sans-serif;
    }

    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: black;
      background: #fcf0e8;
      padding: 15px 30px;
    }
    .navbar .logo {
      display: flex;
      cursor: pointer;
      align-items: center;
    }
    .navbar .logo img {
      height: 80px;
      margin-right: 10px;
    }
    .navbar .logo h1 {
      color: black;
      align-items: center;
      font-size: 23px;
      margin: 0 1px;
    }
    .navbar .nav-links {
      list-style: none;
      display: flex;
    }
    .navbar .nav-links li {
      margin: 0 15px;
    }
    .navbar .nav-links a {
      color: black;
      text-decoration: none;
      font-size: 18px;
      transition: 0.3s;
    }
    .navbar .nav-links a:hover {
      color: #f39c12;
    }
  </style>
</head>
<body>
  <div class="navbar">
    <div class="logo">
      <img onclick="home()" src="logo.png" alt="Site Logo">
      <h1>Quiz</h1>
    </div>
    <ul class="nav-links">
      <li><a href="index.html"><i class="fa-solid fa-home"></i> Home</a></li>
    </ul>
  </div>

    
    

  <a href="https://docs.google.com/document/d/1s9116IONGJnUJOgxLbeRIodKRpaem-kp/export?format=pdf" 
   class="download-btn" 
   download>
    <i class="fa-solid fa-download"></i>
</a>
   <div onclick="back()" class="back"><button class="back"><i class="fa-solid fa-arrow-left"></i>Back</button></div>


  <div class="container">
    <h1>English Grade 6 Ministry (2016/2024)</h1>
    <form id="quizForm">
      <div id="quizContainer">
        <!-- Quiz questions will be injected here -->
      </div>
      <button type="submit" class="submit-btn">Submit Quiz</button>
    </form>
  </div>

  <!-- Modal Popup for Result -->
  <div id="resultModal" class="modal">
    <div class="modal-content">
      <img src="https://cdn-icons-png.flaticon.com/128/10792/10792513.png" alt="Result Image">
      <h1>Quiz Completed!</h1>
      <p id="resultText"></p>
      <button class="close-modal" id="closeModal">OK</button>
    </div>
  </div>

  <script>


function back() {
      window.location.href = '/ministry'; 
    }

    function home() {
      window.location.href = '/'; 
    }

    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyDelPBnpY0xv-_ShgWreMZpld_SUWdRwJk",
      authDomain: "lt-website-bf509.firebaseapp.com",
      projectId: "lt-website-bf509",
      storageBucket: "lt-website-bf509.firebasestorage.app",
      messagingSenderId: "43884867628",
      appId: "1:43884867628:web:617a17c06d37b014a86189",
      measurementId: "G-XL54K0J9BX"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    let quizData = [];

    // Define construction sections: { startIndex, endIndex, content }
    // Define construction sections: { startIndex, endIndex, content }
    const constructionSections = [
  { startIndex: 0, endIndex: 1, content: "<u>ITEMS 1-3 ARE BASED ON THE PASSAGE BELOW. READ IT AND CHOOSE THE CORRECT ANSWER.</u> <br><br> The sun gives us light. So it keeps us warm and gives us heat. My mother dries our clothes in the sun. Plants make their food with help of sunlight. When the sun rises, it becomes day and when it sets it becomes night. The sun rises in the East and sets in the West. If there is no sun, it will be dark everywhere. So I like the sun very much." },
  { startIndex: 3, endIndex: 4, content: "<u>FOR ITEMS 4-14 CHOOSE THE CORRECT ALTERNATIVE THAT ANSWERS THE QUESTION.</u>" },
  { startIndex: 5, endIndex: 6, content: "<u>For items 6-7, analyze the sentence structure.</u>" },
  { startIndex: 22, endIndex: 23, content: "<u>FOR ITEMS 23-27 CHOOSE THE WORD WHICH COMPLETES THE BLANK SPACE.</u>" },
  { startIndex: 27, endIndex: 28, content: "<u>FOR ITEMS 28-30 CHOOSE THE WORD WHICH SIMILAR IN MEANING WITH THE WORD WRITTEN IN BOLD.</u>" },
  { startIndex: 30, endIndex: 31, content: "<u>ITEMS 31-35 ARE BASED ON THE READING TEXT BELOW. READ IT CAREFULLY AND CHOOSE THE CORRECT ALTERNATIVE.</u> <br><br> Africa is the 2nd largest continent. It contains 15 percent of the world's population and the continent makes up to 20 percent of the total land area on planet earth. The equator passes through the center of Africa which gives it largely warm and tropical climates. There are several bodies of water surrounding Africa. The Indian ocean to the Southeast, the Atlantic Ocean to the west, the Mediterranean Sea to the north and the Red Sea to the Northeast. Africa is the home to the longest river, the Nile, and the world's largest desert, the Sahara." },
  { startIndex: 35, endIndex: 36, content: "<u>ITEMS 36-38 ARE ABOUT WORD ORDER IN A SENTENCE. CHOOSE THE CORRECT ALTERNATIVE WITH A CORRECT SENTENCE.</u>" },
  { startIndex: 38, endIndex: 39, content: "<u>ITEMS 39 AND 40 ARE ABOUT PARAGRAPH WRITING. READ THE ITEM CAREFULLY AND CHOOSE THE CORRECT ALTERNATIVE </u>" },
];

    // Load quiz questions from Firestore
    const loadQuiz = () => {
      db.collection('English').get()
      .then(querySnapshot => {
        querySnapshot.forEach(doc => {
          quizData.push(doc.data());
        });
        renderQuiz();
      })
      .catch(error => {
        console.error("Error loading quiz questions: ", error);
      });
    };

    // Render the quiz questions and choices using the custom checkbox structure
    const renderQuiz = () => {
      const quizContainer = document.getElementById('quizContainer');
      let html = '';

      quizData.forEach((question, index) => {
        // Check if there is a construction section before this question
        constructionSections.forEach(section => {
          if (index === section.startIndex) {
            html += `<div class="construction-block">
                       <p><strong>${section.content}</strong></p>
                     </div>`;
          }
        });

        html += `<div class="question-block">
                    <div class="question">${index + 1}. ${question.question}</div>
                    <div class="choices">`;
        
        // For each choice (A, B, C, D), use the provided checkbox structure.
        const choiceLetters = ['A', 'B', 'C', 'D'];
        question.choices.forEach((choiceText, i) => {
          const choiceLetter = choiceLetters[i];
          const checkboxId = `q${index}-choice${choiceLetter}`;
          html += `<div class="checkbox-wrapper-13">
                     <input id="${checkboxId}" type="checkbox" name="q${index}" value="${choiceLetter}">
                     <label for="${checkboxId}">${choiceLetter}. ${choiceText}</label>
                   </div>`;
        });

        html += `</div></div>`;

        // Check if the section ends after this question
        constructionSections.forEach(section => {
          if (index === section.endIndex) {
            html += `<div class="construction-end"><hr></div>`;
          }
        });
      });

      quizContainer.innerHTML = html;

      // Add event listeners so that only one checkbox per question can be selected.
      quizData.forEach((question, index) => {
        const checkboxes = document.querySelectorAll(`input[name="q${index}"]`);
        checkboxes.forEach(checkbox => {
          checkbox.addEventListener('click', function() {
            checkboxes.forEach(box => {
              if (box !== this) {
                box.checked = false;
              }
            });
          });
        });
      });
    };

    // Function to show modal with result
    const showResultModal = (score, total) => {
      const modal = document.getElementById('resultModal');
      const resultText = document.getElementById('resultText');
      resultText.innerText = `You scored ${score} out of ${total}`;
      modal.style.display = 'block';
    };

    // Close modal when OK is clicked
    document.getElementById('closeModal').addEventListener('click', () => {
      document.getElementById('resultModal').style.display = 'none';
    });

    // Handle quiz submission
    document.getElementById('quizForm').addEventListener('submit', function(e) {
      e.preventDefault();
      let score = 0;
      quizData.forEach((question, index) => {
        const selected = document.querySelector(`input[name="q${index}"]:checked`);
        if (selected && selected.value === question.correctAnswer) {
          score++;
        }
      });
      showResultModal(score, quizData.length);
    });

    // Load the quiz when the page loads
    window.onload = loadQuiz;
  </script>
</body>
</html>
